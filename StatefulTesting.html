<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Model-based Testing
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Kurt Schelfthout and contributors">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.3.1/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script> -->

    <link type="text/css" rel="stylesheet" href="https://fscheck.github.io/FsCheck/content/navbar-fixed-left.css" />
    <link type="text/css" rel="stylesheet" href="https://fscheck.github.io/FsCheck/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="https://fscheck.github.io/FsCheck/content/fsdocs-custom.css" />
    <script type="text/javascript" src="https://fscheck.github.io/FsCheck/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->

</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary fixed-left" id="fsdocs-menu">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <a href="https://fscheck.github.io/FsCheck/"><img id="fsdocs-logo" src="https://fscheck.github.io/FsCheck/img/logo.png" alt="FsCheck logo - an inverted A, the mathematical symbol for forall." style="width:150px;margin:10px" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">FsCheck</li>
                <li class="nav-item"><a class="nav-link" href="http://nuget.org/packages/FsCheck">Get via NuGet</a></li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/fscheck/FsCheck">Source Code on GitHub</a></li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/fscheck/FsCheck/blob/master/License.txt">License (BSD-3-Clause)</a></li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/fscheck/FsCheck/blob/master/FsCheck Release Notes.md">Release Notes</a></li>
                <li class="nav-item"><a class="nav-link" href="https://fscheck.github.io/FsCheck//users.html">Who is using FsCheck?</a></li>
            
                <li class="nav-header">Getting started</li>
                <li class="nav-item"><a class="nav-link" href="https://fscheck.github.io/FsCheck//QuickStart.html">Quick Start</a></li>
                <li class="nav-item"><a class="nav-link" href="https://fscheck.github.io/FsCheck//LearningResources.html">Learning Resources</a></li>

                <li class="nav-header">Documentation</li>
                <li class="nav-item"><a class="nav-link" href="https://fscheck.github.io/FsCheck//Properties.html">Properties</a></li>
                <li class="nav-item"><a class="nav-link" href="https://fscheck.github.io/FsCheck//TestData.html">Generating test data</a></li>
                <li class="nav-item"><a class="nav-link" href="https://fscheck.github.io/FsCheck//StatefulTesting.html">Model-based testing</a></li>
                <li class="nav-item"><a class="nav-link" href="https://fscheck.github.io/FsCheck//RunningTests.html">Running tests</a></li>
                <li class="nav-item"><a class="nav-link" href="https://fscheck.github.io/FsCheck//TipsAndTricks.html">Tips and Tricks</a></li>
                <li class="nav-item"><a class="nav-link" href="https://fscheck.github.io/FsCheck//StatefulTestingNew.html">Model-based testing vNext (Experimental)</a></li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fscheck.github.io/FsCheck/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="https://fscheck.github.io/FsCheck/">FsCheck</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            <h1><a name="Model-based-Testing" class="anchor" href="#Model-based-Testing">Model-based Testing</a></h1>
<p>FsCheck also allows you to test objects, which usually encapsulate internal
state through a set of methods. FsCheck, through small extension,
allows you to do model-based specification of a class under test. Consider the following class,
with an artificial bug in it:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="rt">Counter</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span>
  <span class="k">let</span> <span class="k">mutable</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="mv">n</span> <span class="o">=</span> <span class="n">0</span>
  <span class="k">member</span> <span class="id">__</span><span class="pn">.</span><span class="fn">Inc</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 5)" onmouseover="showTip(event, 'fs4', 5)" class="mv">n</span> <span class="k">&lt;-</span> <span onmouseout="hideTip(event, 'fs4', 6)" onmouseover="showTip(event, 'fs4', 6)" class="mv">n</span> <span class="o">+</span> <span class="n">1</span>
  <span class="k">member</span> <span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="id">__</span><span class="pn">.</span><span class="fn">Dec</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs4', 8)" onmouseover="showTip(event, 'fs4', 8)" class="mv">n</span> <span class="o">&gt;</span> <span class="n">2</span> <span class="k">then</span> <span onmouseout="hideTip(event, 'fs4', 9)" onmouseover="showTip(event, 'fs4', 9)" class="mv">n</span> <span class="k">&lt;-</span> <span onmouseout="hideTip(event, 'fs4', 10)" onmouseover="showTip(event, 'fs4', 10)" class="mv">n</span> <span class="o">-</span> <span class="n">2</span> <span class="k">else</span> <span onmouseout="hideTip(event, 'fs4', 11)" onmouseover="showTip(event, 'fs4', 11)" class="mv">n</span> <span class="k">&lt;-</span> <span onmouseout="hideTip(event, 'fs4', 12)" onmouseover="showTip(event, 'fs4', 12)" class="mv">n</span> <span class="o">-</span> <span class="n">1</span>
  <span class="k">member</span> <span onmouseout="hideTip(event, 'fs5', 13)" onmouseover="showTip(event, 'fs5', 13)" class="id">__</span><span class="pn">.</span><span class="prop">Get</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 14)" onmouseover="showTip(event, 'fs4', 14)" class="mv">n</span>
  <span class="k">member</span> <span onmouseout="hideTip(event, 'fs5', 15)" onmouseover="showTip(event, 'fs5', 15)" class="id">__</span><span class="pn">.</span><span class="fn">Reset</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 16)" onmouseover="showTip(event, 'fs4', 16)" class="mv">n</span> <span class="k">&lt;-</span> <span class="n">0</span>
  <span class="k">override</span> <span onmouseout="hideTip(event, 'fs5', 17)" onmouseover="showTip(event, 'fs5', 17)" class="id">__</span><span class="pn">.</span><span class="fn">ToString</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 18)" onmouseover="showTip(event, 'fs6', 18)" class="fn">sprintf</span> <span class="s">&quot;Counter=</span><span class="pf">%i</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs4', 19)" onmouseover="showTip(event, 'fs4', 19)" class="mv">n</span>
</code></pre>
<p>We'll elide the class definition in C#, it's very similar.</p>
<p>As a model to test this class we can use an int value which is an abstraction of the object's internal state. The
idea is that each operation on the class (in this case, Inc and Dec) affects both the model and the actual object, and
after each such operation, the model and the actual instance should still be equivalent.</p>
<p>With this idea in mind, you can write a specification of the Counter class using an int model as follows (full example
in C# below):</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 20)" onmouseover="showTip(event, 'fs7', 20)" class="id">spec</span> <span class="o">=</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 21)" onmouseover="showTip(event, 'fs8', 21)" class="fn">inc</span> <span class="o">=</span> <span class="pn">{</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs9', 22)" onmouseover="showTip(event, 'fs9', 22)" class="rt">Command</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs3', 23)" onmouseover="showTip(event, 'fs3', 23)" class="rt">Counter</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs10', 24)" onmouseover="showTip(event, 'fs10', 24)" class="vt">int</span><span class="pn">&gt;</span><span class="pn">(</span><span class="pn">)</span> <span class="k">with</span>
                    <span class="k">override</span> <span class="id">__</span><span class="pn">.</span><span class="fn">RunActual</span> <span onmouseout="hideTip(event, 'fs11', 25)" onmouseover="showTip(event, 'fs11', 25)" class="fn">counter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 26)" onmouseover="showTip(event, 'fs11', 26)" class="fn">counter</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 27)" onmouseover="showTip(event, 'fs12', 27)" class="id">Inc</span><span class="pn">(</span><span class="pn">)</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs11', 28)" onmouseover="showTip(event, 'fs11', 28)" class="fn">counter</span>
                    <span class="k">override</span> <span onmouseout="hideTip(event, 'fs13', 29)" onmouseover="showTip(event, 'fs13', 29)" class="id">__</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 30)" onmouseover="showTip(event, 'fs14', 30)" class="fn">RunModel</span> <span onmouseout="hideTip(event, 'fs15', 31)" onmouseover="showTip(event, 'fs15', 31)" class="fn">m</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 32)" onmouseover="showTip(event, 'fs15', 32)" class="fn">m</span> <span class="o">+</span> <span class="n">1</span>
                    <span class="k">override</span> <span onmouseout="hideTip(event, 'fs13', 33)" onmouseover="showTip(event, 'fs13', 33)" class="id">__</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 34)" onmouseover="showTip(event, 'fs16', 34)" class="fn">Post</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs11', 35)" onmouseover="showTip(event, 'fs11', 35)" class="fn">counter</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs15', 36)" onmouseover="showTip(event, 'fs15', 36)" class="fn">m</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 37)" onmouseover="showTip(event, 'fs11', 37)" class="fn">counter</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs17', 38)" onmouseover="showTip(event, 'fs17', 38)" class="id">Get</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 39)" onmouseover="showTip(event, 'fs15', 39)" class="fn">m</span> <span class="o">|@</span> <span onmouseout="hideTip(event, 'fs6', 40)" onmouseover="showTip(event, 'fs6', 40)" class="fn">sprintf</span> <span class="s">&quot;model: </span><span class="pf">%i</span><span class="s"> &lt;&gt; </span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs15', 41)" onmouseover="showTip(event, 'fs15', 41)" class="fn">m</span> <span onmouseout="hideTip(event, 'fs11', 42)" onmouseover="showTip(event, 'fs11', 42)" class="fn">counter</span>
                    <span class="k">override</span> <span onmouseout="hideTip(event, 'fs13', 43)" onmouseover="showTip(event, 'fs13', 43)" class="id">__</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs18', 44)" onmouseover="showTip(event, 'fs18', 44)" class="fn">ToString</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span> <span class="s">&quot;inc&quot;</span> <span class="pn">}</span>
                           
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs19', 45)" onmouseover="showTip(event, 'fs19', 45)" class="fn">dec</span> <span class="o">=</span> <span class="pn">{</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs9', 46)" onmouseover="showTip(event, 'fs9', 46)" class="rt">Command</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs3', 47)" onmouseover="showTip(event, 'fs3', 47)" class="rt">Counter</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs10', 48)" onmouseover="showTip(event, 'fs10', 48)" class="vt">int</span><span class="pn">&gt;</span><span class="pn">(</span><span class="pn">)</span> <span class="k">with</span>
                    <span class="k">override</span> <span class="id">__</span><span class="pn">.</span><span class="fn">RunActual</span> <span onmouseout="hideTip(event, 'fs11', 49)" onmouseover="showTip(event, 'fs11', 49)" class="fn">counter</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 50)" onmouseover="showTip(event, 'fs11', 50)" class="fn">counter</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 51)" onmouseover="showTip(event, 'fs20', 51)" class="id">Dec</span><span class="pn">(</span><span class="pn">)</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs11', 52)" onmouseover="showTip(event, 'fs11', 52)" class="fn">counter</span>
                    <span class="k">override</span> <span onmouseout="hideTip(event, 'fs13', 53)" onmouseover="showTip(event, 'fs13', 53)" class="id">__</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 54)" onmouseover="showTip(event, 'fs14', 54)" class="fn">RunModel</span> <span onmouseout="hideTip(event, 'fs15', 55)" onmouseover="showTip(event, 'fs15', 55)" class="fn">m</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 56)" onmouseover="showTip(event, 'fs15', 56)" class="fn">m</span> <span class="o">-</span> <span class="n">1</span>
                    <span class="k">override</span> <span onmouseout="hideTip(event, 'fs13', 57)" onmouseover="showTip(event, 'fs13', 57)" class="id">__</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 58)" onmouseover="showTip(event, 'fs16', 58)" class="fn">Post</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs11', 59)" onmouseover="showTip(event, 'fs11', 59)" class="fn">counter</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs15', 60)" onmouseover="showTip(event, 'fs15', 60)" class="fn">m</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs11', 61)" onmouseover="showTip(event, 'fs11', 61)" class="fn">counter</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs17', 62)" onmouseover="showTip(event, 'fs17', 62)" class="id">Get</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 63)" onmouseover="showTip(event, 'fs15', 63)" class="fn">m</span> <span class="o">|@</span> <span onmouseout="hideTip(event, 'fs6', 64)" onmouseover="showTip(event, 'fs6', 64)" class="fn">sprintf</span> <span class="s">&quot;model: </span><span class="pf">%i</span><span class="s"> &lt;&gt; </span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs15', 65)" onmouseover="showTip(event, 'fs15', 65)" class="fn">m</span> <span onmouseout="hideTip(event, 'fs11', 66)" onmouseover="showTip(event, 'fs11', 66)" class="fn">counter</span>
                    <span class="k">override</span> <span onmouseout="hideTip(event, 'fs13', 67)" onmouseover="showTip(event, 'fs13', 67)" class="id">__</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs18', 68)" onmouseover="showTip(event, 'fs18', 68)" class="fn">ToString</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span> <span class="s">&quot;dec&quot;</span> <span class="pn">}</span>
  
  <span class="pn">{</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs21', 69)" onmouseover="showTip(event, 'fs21', 69)" class="if">ICommandGenerator</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs3', 70)" onmouseover="showTip(event, 'fs3', 70)" class="rt">Counter</span><span class="pn">,</span><span onmouseout="hideTip(event, 'fs10', 71)" onmouseover="showTip(event, 'fs10', 71)" class="vt">int</span><span class="pn">&gt;</span> <span class="k">with</span>
      <span class="k">member</span> <span class="id">__</span><span class="pn">.</span><span class="fn">InitialActual</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 72)" onmouseover="showTip(event, 'fs3', 72)" class="fn">Counter</span><span class="pn">(</span><span class="pn">)</span>
      <span class="k">member</span> <span onmouseout="hideTip(event, 'fs22', 73)" onmouseover="showTip(event, 'fs22', 73)" class="id">__</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs23', 74)" onmouseover="showTip(event, 'fs23', 74)" class="fn">InitialModel</span> <span class="o">=</span> <span class="n">0</span>
      <span class="k">member</span> <span onmouseout="hideTip(event, 'fs22', 75)" onmouseover="showTip(event, 'fs22', 75)" class="id">__</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 76)" onmouseover="showTip(event, 'fs24', 76)" class="fn">Next</span> <span onmouseout="hideTip(event, 'fs25', 77)" onmouseover="showTip(event, 'fs25', 77)" class="fn">model</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 78)" onmouseover="showTip(event, 'fs26', 78)" class="m">Gen</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs27', 79)" onmouseover="showTip(event, 'fs27', 79)" class="id">elements</span> <span class="pn">[</span><span onmouseout="hideTip(event, 'fs8', 80)" onmouseover="showTip(event, 'fs8', 80)" class="fn">inc</span><span class="pn">;</span><span onmouseout="hideTip(event, 'fs19', 81)" onmouseover="showTip(event, 'fs19', 81)" class="fn">dec</span><span class="pn">]</span> <span class="pn">}</span>
</code></pre>
<p>A specification is put together for FsCheck as an object that implementents <code>ICommandGenerator&lt;'typeUnderTest,'modelType&gt;</code>. It should return
an initial object and an initial model of that object; and it should return a generator of <code>Command</code> objects.</p>
<p>Each <code>Command</code> typically represents one method to call on the object under test, and describes what
happens to the model and the object when the command is executed. Also, it can assert preconditions that
need to hold before executing the command: FsCheck will not execute that command if the precondition does
not hold. It asserts postconditions that should hold after a command is executed: FsCheck
fails the test if a postcondition does not hold.</p>
<p>Preferably also override ToString in each command so that counterexamples can be printed.</p>
<p>A specification can be checked as follows:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs28', 82)" onmouseover="showTip(event, 'fs28', 82)" class="rt">Check</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 83)" onmouseover="showTip(event, 'fs29', 83)" class="id">Quick</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs9', 84)" onmouseover="showTip(event, 'fs9', 84)" class="m">Command</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 85)" onmouseover="showTip(event, 'fs30', 85)" class="id">toProperty</span> <span onmouseout="hideTip(event, 'fs7', 86)" onmouseover="showTip(event, 'fs7', 86)" class="id">spec</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>Falsifiable, after 6 tests (3 shrinks) (StdGen (1453929639, 296935214)):
Label of failing property: model: 2 &lt;&gt; Counter=1
Original:
[inc; dec; inc; inc; inc; dec; dec]
Shrunk:
[inc; inc; inc; dec]</code></pre></td></tr></table>
<p>Notice that not only has FsCheck found our 'bug', it has also produced the minimal sequence that leads to it.</p>
<p>Finally, in C#, all this looks as follows:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="csharp"><span class="k">public</span> <span class="k">class</span> CounterSpec <span class="o">:</span> ICommandGenerator&lt;Counter, <span class="k">int</span>&gt; {

    <span class="k">public</span> Gen&lt;Command&lt;Counter, <span class="k">int</span>&gt;<span class="o">&gt;</span> Next(<span class="k">int</span> <span class="k">value</span>) {
        <span class="k">return</span> Gen.Elements(<span class="k">new</span> Command&lt;Counter, <span class="k">int</span>&gt;[] { <span class="k">new</span> Inc(), <span class="k">new</span> Dec() });
    }

    <span class="k">public</span> Counter InitialActual <span class="o">=</span><span class="o">&gt;</span> <span class="k">new</span> Counter();

    <span class="k">public</span> <span class="k">int</span> InitialModel <span class="o">=</span><span class="o">&gt;</span> <span class="n">0</span>;

    <span class="k">private</span> <span class="k">class</span> Inc <span class="o">:</span> Command&lt;Counter,<span class="k">int</span>&gt; {
        <span class="k">public</span> <span class="k">override</span> Counter RunActual(Counter c) {
            c.Inc();
            <span class="k">return</span> c;
        }

        <span class="k">public</span> <span class="k">override</span> <span class="k">int</span> RunModel(<span class="k">int</span> m) <span class="o">=</span><span class="o">&gt;</span> m <span class="o">+</span> <span class="n">1</span>;

        <span class="k">public</span> <span class="k">override</span> Property Post(Counter c, <span class="k">int</span> m) {
            <span class="k">return</span> (m <span class="o">=</span><span class="o">=</span> c.Get()).ToProperty();
        }

        <span class="k">public</span> <span class="k">override</span> <span class="k">string</span> ToString() <span class="o">=</span><span class="o">&gt;</span> <span class="s">"inc"</span>;
    }

    <span class="k">private</span> <span class="k">class</span> Dec <span class="o">:</span> Command&lt;Counter,<span class="k">int</span>&gt;{
        <span class="k">public</span> <span class="k">override</span> Counter RunActual(Counter c) {
            c.Dec();
            <span class="k">return</span> c;
        }

        <span class="k">public</span> <span class="k">override</span> <span class="k">int</span> RunModel(<span class="k">int</span> m) <span class="o">=</span><span class="o">&gt;</span> m <span class="o">-</span> <span class="n">1</span>;

        <span class="k">public</span> <span class="k">override</span> Property Post(Counter c, <span class="k">int</span> m) {
            <span class="k">return</span> (m <span class="o">=</span><span class="o">=</span> c.Get()).ToProperty();
        }

        <span class="k">public</span> <span class="k">override</span> <span class="k">string</span> ToString() <span class="o">=</span><span class="o">&gt;</span> <span class="s">"dec"</span>;
    }
}</code></pre></td></tr></table>
<p>And to run:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="csharp"><span class="k">new</span> CounterSpec()
    .ToProperty()
    .QuickCheck();</code></pre></td></tr></table>

            <div class="fsdocs-tip" id="fs1">namespace FsCheck</div>
<div class="fsdocs-tip" id="fs2">namespace System</div>
<div class="fsdocs-tip" id="fs3">Multiple items<br />type Counter =<br />&#160;&#160;new : unit -&gt; Counter<br />&#160;&#160;member Dec : unit -&gt; unit<br />&#160;&#160;member Inc : unit -&gt; unit<br />&#160;&#160;member Reset : unit -&gt; unit<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member Get : int<br /><br />--------------------<br />new : unit -&gt; Counter</div>
<div class="fsdocs-tip" id="fs4">val mutable n : int</div>
<div class="fsdocs-tip" id="fs5">val __ : Counter</div>
<div class="fsdocs-tip" id="fs6">val sprintf : format:Printf.StringFormat&lt;&#39;T&gt; -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs7">val spec : ICommandGenerator&lt;Counter,int&gt;</div>
<div class="fsdocs-tip" id="fs8">val inc : Command&lt;Counter,int&gt;</div>
<div class="fsdocs-tip" id="fs9">Multiple items<br />module Command<br /><br />from FsCheck<br /><br />--------------------<br />type Command&lt;&#39;Actual,&#39;Model&gt; =<br />&#160;&#160;new : unit -&gt; Command&lt;&#39;Actual,&#39;Model&gt;<br />&#160;&#160;abstract member Post : &#39;Actual * &#39;Model -&gt; Property + 1 overload<br />&#160;&#160;abstract member Pre : &#39;Model -&gt; bool + 1 overload<br />&#160;&#160;abstract member RunActual : &#39;Actual -&gt; &#39;Actual<br />&#160;&#160;abstract member RunModel : &#39;Model -&gt; &#39;Model<br /><br />--------------------<br />new : unit -&gt; Command&lt;&#39;Actual,&#39;Model&gt;</div>
<div class="fsdocs-tip" id="fs10">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />--------------------<br />[&lt;Struct&gt;]<br />type int = int32<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; =<br />&#160;&#160;int</div>
<div class="fsdocs-tip" id="fs11">val counter : Counter</div>
<div class="fsdocs-tip" id="fs12">member Counter.Inc : unit -&gt; unit</div>
<div class="fsdocs-tip" id="fs13">val __ : Command&lt;Counter,int&gt;</div>
<div class="fsdocs-tip" id="fs14">abstract member Command.RunModel : &#39;Model -&gt; &#39;Model</div>
<div class="fsdocs-tip" id="fs15">val m : int</div>
<div class="fsdocs-tip" id="fs16">override Command.Post : &#39;Actual * &#39;Model -&gt; Property</div>
<div class="fsdocs-tip" id="fs17">property Counter.Get: int with get</div>
<div class="fsdocs-tip" id="fs18">Object.ToString() : string</div>
<div class="fsdocs-tip" id="fs19">val dec : Command&lt;Counter,int&gt;</div>
<div class="fsdocs-tip" id="fs20">member Counter.Dec : unit -&gt; unit</div>
<div class="fsdocs-tip" id="fs21">type ICommandGenerator&lt;&#39;Actual,&#39;Model&gt; =<br />&#160;&#160;abstract member Next : &#39;Model -&gt; Gen&lt;Command&lt;&#39;Actual,&#39;Model&gt;&gt;<br />&#160;&#160;abstract member InitialActual : &#39;Actual<br />&#160;&#160;abstract member InitialModel : &#39;Model</div>
<div class="fsdocs-tip" id="fs22">val __ : ICommandGenerator&lt;Counter,int&gt;</div>
<div class="fsdocs-tip" id="fs23">property ICommandGenerator.InitialModel: int with get</div>
<div class="fsdocs-tip" id="fs24">abstract member ICommandGenerator.Next : &#39;Model -&gt; Gen&lt;Command&lt;&#39;Actual,&#39;Model&gt;&gt;</div>
<div class="fsdocs-tip" id="fs25">val model : int</div>
<div class="fsdocs-tip" id="fs26">Multiple items<br />module Gen<br /><br />from FsCheck<br /><br />--------------------<br />type Gen&lt;&#39;a&gt; =<br />&#160;&#160;private | Gen of (int -&gt; StdGen -&gt; &#39;a)<br />&#160;&#160;&#160;&#160;interface IGen<br />&#160;&#160;&#160;&#160;member private Map : f:(&#39;a -&gt; &#39;b) -&gt; Gen&lt;&#39;b&gt;<br />&#160;&#160;&#160;&#160;static member ( &lt;!&gt; ) : f:(&#39;a1 -&gt; &#39;a2) * a:Gen&lt;&#39;a1&gt; -&gt; Gen&lt;&#39;a2&gt;<br />&#160;&#160;&#160;&#160;static member ( &lt;*&gt; ) : f:Gen&lt;(&#39;a1 -&gt; &#39;a2)&gt; * a:Gen&lt;&#39;a1&gt; -&gt; Gen&lt;&#39;a2&gt;<br />&#160;&#160;&#160;&#160;static member ( &gt;&gt;= ) : m:Gen&lt;&#39;a1&gt; * k:(&#39;a1 -&gt; Gen&lt;&#39;a2&gt;) -&gt; Gen&lt;&#39;a2&gt;</div>
<div class="fsdocs-tip" id="fs27">val elements : xs:seq&lt;&#39;b&gt; -&gt; Gen&lt;&#39;b&gt;</div>
<div class="fsdocs-tip" id="fs28">type Check =<br />&#160;&#160;static member All : config:Config * test:Type -&gt; unit + 1 overload<br />&#160;&#160;static member Method : config:Config * methodInfo:MethodInfo * ?target:obj -&gt; unit<br />&#160;&#160;static member One : config:Config * property:&#39;Testable -&gt; unit + 1 overload<br />&#160;&#160;static member Quick : property:&#39;Testable -&gt; unit + 1 overload<br />&#160;&#160;static member QuickAll : test:Type -&gt; unit + 1 overload<br />&#160;&#160;static member QuickThrowOnFailure : property:&#39;Testable -&gt; unit<br />&#160;&#160;static member QuickThrowOnFailureAll : test:Type -&gt; unit + 1 overload<br />&#160;&#160;static member Verbose : property:&#39;Testable -&gt; unit + 1 overload<br />&#160;&#160;static member VerboseAll : test:Type -&gt; unit + 1 overload<br />&#160;&#160;static member VerboseThrowOnFailure : property:&#39;Testable -&gt; unit<br />&#160;&#160;...</div>
<div class="fsdocs-tip" id="fs29">static member Check.Quick : property:&#39;Testable -&gt; unit<br />static member Check.Quick : name:string * property:&#39;Testable -&gt; unit</div>
<div class="fsdocs-tip" id="fs30">val toProperty : spec:ICommandGenerator&lt;&#39;Actual,&#39;Model&gt; -&gt; Property</div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = 'https://fscheck.github.io/FsCheck/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="https://fscheck.github.io/FsCheck/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
    </div>
</body>

</html>

